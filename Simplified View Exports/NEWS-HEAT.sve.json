{"simplified_view":"extmod","module_settings":[{"module":"api_client","setting":"conn-config-efsbkugg","value":"{\"label\":\"Update DAG Name w\\\/ Intervention Date\",\"type\":\"http\",\"active\":false,\"trigger\":\"R\",\"event\":\"site_details_arm_3\",\"form\":\"site_phase_dates_addtl_info\",\"cron_min\":\"\",\"cron_hr\":\"\",\"cron_day\":\"\",\"cron_mon\":\"\",\"cron_dow\":\"\",\"condition\":\"[site_details_arm_3][site_dag_label_calc] <> '' and \\r\\n[site_details_arm_3][site_dag_name] <> '' and \\r\\n[site_details_arm_3][site_dag_label_curr] <> [site_details_arm_3][site_dag_label_calc]\"}"},{"module":"api_client","setting":"conn-config-rqeltvtw","value":"{\"label\":\"Update DAG Name w\\\/ Intervention Date (Scheduled)\",\"type\":\"http\",\"active\":false,\"trigger\":\"C\",\"event\":\"\",\"form\":\"\",\"cron_min\":\"1\",\"cron_hr\":\"0\",\"cron_day\":\"*\",\"cron_mon\":\"*\",\"cron_dow\":\"*\",\"condition\":\"[site_details_arm_3][site_dag_label_calc] <> '' and \\r\\n[site_details_arm_3][site_dag_name] <> '' and \\r\\n[site_details_arm_3][site_dag_label_curr] <> [site_details_arm_3][site_dag_label_calc]\"}"},{"module":"api_client","setting":"conn-data-efsbkugg","value":"{\"url\":\"https:\\\/\\\/redcap03.nottingham.ac.uk\\\/api\\\/\",\"method\":\"post\",\"headers\":\"\",\"body\":\"token=3431ED3FD9F8A681BD6CE97808FE3442&content=dag&action=import&format=json&data=[{\\\"data_access_group_name\\\":\\\"site_dag_label_calc\\\",\\\"unique_group_name\\\":\\\"site_dag_name\\\"}]\",\"ph_name\":[\"site_dag_label_calc\",\"site_dag_name\"],\"ph_event\":[\"%\",\"%\"],\"ph_field\":[\"site_dag_label_calc\",\"site_dag_name\"],\"ph_inst\":[\"\",\"\"],\"ph_func\":[\"\",\"\"],\"ph_func_args\":[\"\",\"\"],\"ph_format\":[\"\",\"\"],\"response_format\":\"\",\"response_errval\":\"\"}"},{"module":"api_client","setting":"conn-data-rqeltvtw","value":"{\"url\":\"https:\\\/\\\/redcap03.nottingham.ac.uk\\\/api\\\/\",\"method\":\"post\",\"headers\":\"\",\"body\":\"token=3431ED3FD9F8A681BD6CE97808FE3442&content=dag&action=import&format=json&data=[{\\\"data_access_group_name\\\":\\\"site_dag_label_calc\\\",\\\"unique_group_name\\\":\\\"site_dag_name\\\"}]\",\"ph_name\":[\"site_dag_label_calc\",\"site_dag_name\"],\"ph_event\":[\"%\",\"%\"],\"ph_field\":[\"site_dag_label_calc\",\"site_dag_name\"],\"ph_inst\":[\"\",\"\"],\"ph_func\":[\"\",\"\"],\"ph_func_args\":[\"\",\"\"],\"ph_format\":[\"\",\"\"],\"response_format\":\"\",\"response_errval\":\"\"}"},{"module":"api_client","setting":"conn-list","value":"[\"efsbkugg\",\"rqeltvtw\"]"},{"module":"esendex_alerts","setting":"email-from-addr","value":"newsheat@nottingham.ac.uk"},{"module":"esendex_alerts","setting":"email-from-name","value":"NEWS-HEAT"},{"module":"esendex_alerts","setting":"email-settings","value":"true"},{"module":"esendex_alerts","setting":"it-inbox","value":"newsheat@nottingham.ac.uk"},{"module":"esendex_alerts","setting":"sms-setting","value":"0"},{"module":"extra_calculation_functions","setting":"calc-values-auto-update","value":"true"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-name","value":"[\"site_email_addresses_calc\",\"nemail_which_sites\",\"nemail_message\"]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-field","value":"[\"site_email_addresses_calc\",\"nemail_which_sites\",\"nemail_message\"]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-filter","value":"[\"[record-name] = ?\",\"[record-name]=?\",\"[record-name]=?\"]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-list-sep","value":"[null,\", \",null]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-project","value":"[\"NEWS-HEAT\",\"NEWS-HEAT\",\"NEWS-HEAT\"]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-split-checkbox","value":"[false,true,false]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-type","value":"[null,\"list\",null]"},{"module":"extra_calculation_functions","setting":"custom-data-lookup-use-label","value":"[false,true,false]"},{"module":"minimization","setting":"bogus-field","value":"site_rand_grp_fake"},{"module":"minimization","setting":"diag-field","value":"site_rand_diagnostics"},{"module":"minimization","setting":"initial-random","value":"0"},{"module":"minimization","setting":"ir-strat-event","value":"[null]"},{"module":"minimization","setting":"ir-strat-field","value":"[null]"},{"module":"minimization","setting":"ir-stratification","value":"[\"true\"]"},{"module":"minimization","setting":"minim-codes","value":"[[\"true\",\"true\"]]"},{"module":"minimization","setting":"minim-event","value":"[[\"site_details_arm_3\",\"site_details_arm_3\"]]"},{"module":"minimization","setting":"minim-field","value":"[[\"site_rand_min_births\",\"site_rand_min_hosplevel\"]]"},{"module":"minimization","setting":"minim-mode","value":"[null]"},{"module":"minimization","setting":"minim-vars","value":"[[\"true\",\"true\"]]"},{"module":"minimization","setting":"mode","value":"[\"true\"]"},{"module":"minimization","setting":"mode-variable","value":"false"},{"module":"minimization","setting":"rando-code","value":"[[\"eenc_only\",\"eenc_plus_news_heat_care_bundle\"]]"},{"module":"minimization","setting":"rando-date-field","value":"site_rand_datetime"},{"module":"minimization","setting":"rando-date-tz","value":"U"},{"module":"minimization","setting":"rando-desc","value":"[[\"EENC only\",\"EENC plus NEWS-HEAT care bundle\"]]"},{"module":"minimization","setting":"rando-event","value":"site_details_arm_3"},{"module":"minimization","setting":"rando-field","value":"site_rand_grp"},{"module":"minimization","setting":"rando-logic","value":"[ref_id_arm3_valid] = '1' and [site_rand_min_births] <> '' and [site_rand_min_hosplevel] <> ''"},{"module":"minimization","setting":"rando-protect-value","value":"false"},{"module":"minimization","setting":"rando-ratio","value":"[[\"1\",\"1\"]]"},{"module":"minimization","setting":"rando-submit-any-status","value":"false"},{"module":"minimization","setting":"rando-submit-status-reset","value":"true"},{"module":"minimization","setting":"random-percent","value":"20"},{"module":"minimization","setting":"strat-event","value":"[null]"},{"module":"minimization","setting":"strat-field","value":"[null]"},{"module":"minimization","setting":"stratification","value":"[\"true\"]"},{"module":"minimization","setting":"stratify","value":"false"},{"module":"project_deployment","setting":"source-project","value":"602"},{"module":"project_deployment","setting":"source-server","value":"https:\/\/redcap03.nottingham.ac.uk"},{"module":"redcap_javascript_injector","setting":"proj-code","value":"[\"window.addEventListener(\\\"load\\\", (event) => {\\n\\t\\\/\\\/ If the record ID is valid but the record has not been saved at least once, trigger automatic \\\"Save & Stay\\\" so that \\\"Send Email\\\" button will function appropriately\\n\\tif(document.querySelector('input[name=\\\"ref_id_arm4_valid\\\"]').value == '1' && document.querySelector('#nemail_loading-tr').getAttribute(\\\"style\\\") == \\\"display: table-row;\\\") {\\n\\t\\t;\\n\\t\\tsetTimeout(function(){\\n  \\t\\tdocument.getElementById(\\\"submit-btn-savecontinue\\\").click()\\n\\t\\t}, 1000);\\n\\t}\\n\\n\\t\\\/\\\/ Begin by temporarily disabling all checkboxes for sites to email while database checks to see which have no defined emails on the \\\"Notification Email Addresses\\\" form\\n\\tdocument.querySelectorAll('input[name=\\\"__chkn__nemail_which_sites\\\"]').forEach(cb => {\\n\\t  cb.disabled = true;\\n\\t});\\n\\t\\n\\t\\\/\\\/ Temporarily disable \\\"Send Email\\\" button, if it is present\\n\\tif(document.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]')) {\\n\\t\\tdocument.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]').disabled = true\\n\\t\\tdocument.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]').classList.add(\\\"ui-state-disabled\\\");\\n\\t}\\n\\n\\t\\\/\\\/Get the noaddresses calc field and monitor for programmatic changes to the value\\n\\tconst nemail_sites_noaddresses = document.querySelector('input[name=\\\"nemail_sites_noaddresses\\\"]');\\n\\tconst desc_nemail_sites_noaddresses = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, \\\"value\\\");\\n\\tObject.defineProperty(nemail_sites_noaddresses, \\\"value\\\", {\\n\\t    get: desc_nemail_sites_noaddresses.get,\\n\\t    set: function(v) {\\n\\t        desc_nemail_sites_noaddresses.set.call(this, v);\\n\\t        const excluded = v.split(',').map(v => v.trim());\\n\\t\\t\\t\\t\\tdocument.querySelectorAll('input[name=\\\"__chkn__nemail_which_sites\\\"]').forEach(cb => {\\n\\t\\t\\t\\t\\t\\tif(excluded.includes(cb.getAttribute('code'))) {\\n\\t\\t\\t\\t\\t\\t\\t\\\/\\\/ Deselect checkboxes that are checked but should be disabled\\n\\t\\t\\t\\t\\t\\t\\tcb.checked = false;\\n\\t\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\t\\t\\\/\\\/ Enable checkboxes that have email addresses\\n\\t\\t\\t\\t\\t\\t\\tcb.disabled = false;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t    }\\n\\t});\\n\\t\\n\\t\\\/\\\/ Get the recipients, subject, and message fields\\n\\tconst nemail_addresses = document.querySelector('input[name=\\\"nemail_addresses\\\"]');\\n\\tconst nemail_subject = document.querySelector('input[name=\\\"nemail_addresses\\\"]');\\n\\tconst nemail_message = document.querySelector('textarea[name=\\\"nemail_message\\\"]');\\n\\n\\t\\\/\\\/ Monitor the recipients field for programmatic changes to the value and check if the email can be sent when it changes\\n\\tconst desc_nemail_addresses = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, \\\"value\\\");\\n\\tObject.defineProperty(nemail_addresses, \\\"value\\\", {\\n\\t    get: desc_nemail_addresses.get,\\n\\t    set: function(v) {\\n\\t        desc_nemail_addresses.set.call(this, v);\\n\\t        checkIfEmailCanBeSent(nemail_addresses.value,nemail_subject.value,nemail_message.value)\\n\\t    }\\n\\t});\\n\\t\\n\\t\\\/\\\/ Monitor the subject and message fields for changes to the values and check if the email can be sent when they change\\n\\tnemail_subject.addEventListener(\\\"change\\\", checkIfEmailCanBeSent(nemail_addresses.value,nemail_subject.value,nemail_message.value));\\n\\tnemail_message.addEventListener(\\\"change\\\", checkIfEmailCanBeSent(nemail_addresses.value,nemail_subject.value,nemail_message.value));\\n});\\n\\nfunction checkIfEmailCanBeSent(recipients,subject,message) {\\n\\t\\\/\\\/ Checks if at least one recipient, subject, and message are defined and enables the \\\"Send email\\\" button if so.\\n\\tif(document.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]') && trim(recipients) != '' && trim(subject) != '' && trim(message) != '') {\\n\\t\\t\\\/\\\/ Enable \\\"Send Email\\\" button\\n\\t\\tdocument.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]').disabled = false\\n\\t\\tdocument.querySelector('#nemail_sent_date-tr > td:nth-child(2) > div:nth-child(2) > button[name=\\\"nctu-alert-button\\\"]').classList.remove(\\\"ui-state-disabled\\\");\\n\\t}\\n\\n    \\n    \\\/\\\/ Add tinymce editor to allow better editing of message contents\\n    tinymce.init({\\n        license_key: 'gpl',\\n        font_family_formats: 'Open Sans=Open Sans; Andale Mono=andale mono,times; Arial=arial,helvetica,sans-serif; Arial Black=arial black,avant garde; Book Antiqua=book antiqua,palatino; Comic Sans MS=comic sans ms,sans-serif; Courier New=courier new,courier; Georgia=georgia,palatino; Helvetica=helvetica; Impact=impact,chicago; Symbol=symbol; Tahoma=tahoma,arial,helvetica,sans-serif; Terminal=terminal,monaco; Times New Roman=times new roman,times; Trebuchet MS=trebuchet ms,geneva; Verdana=verdana,geneva; Webdings=webdings; Wingdings=wingdings,zapf dingbats',\\n        promotion: false,\\n        entity_encoding : \\\"raw\\\",\\n        default_link_target: '_blank',\\n        selector: 'textarea#nemail_message',\\n        menubar: false,\\n        branding: false,\\n        statusbar: true,\\n        elementpath: false, \\\/\\\/ Hide this, since it oddly renders below the textarea.\\n        plugins: 'autolink lists link searchreplace code table directionality hr',\\n        toolbar1: 'fontfamily blocks fontsize bold italic underline strikethrough forecolor backcolor',\\n        toolbar2: 'align bullist numlist outdent indent table pre hr link fullscreen searchreplace removeformat undo redo code',\\n        contextmenu: \\\"copy paste | link image inserttable | cell row column deletetable\\\",\\n        content_css: `${window.location.href.substring(0, window.location.href.indexOf(\\\"DataEntry\\\"))}Resources\\\/webpack\\\/css\\\/bootstrap.min.css,${window.location.href.substring(0, window.location.href.indexOf(\\\"DataEntry\\\"))}Resources\\\/webpack\\\/css\\\/fontawesome\\\/css\\\/all.min.css,${window.location.href.substring(0, window.location.href.indexOf(\\\"DataEntry\\\"))}Resources\\\/css\\\/style.css`,\\n        relative_urls: false,\\n        convert_urls : false,\\n        browser_spellcheck : true,\\n        editable_root: (!document.getElementById(\\\"nemail_message\\\").hasAttribute(\\\"disabled\\\")),\\n    });\\n}\",\"window.addEventListener(\\\"load\\\", (event) => {\\n\\t\\\/\\\/ Locates and sets the value of any field ending with '_curr_view_is_app' in the id to 0 (as javascript injector will not work in the REDCap Mobile App)\\n\\tdocument.querySelector('input[name$=\\\"_curr_view_is_app\\\"]').value = '0'\\n});\"]"},{"module":"redcap_javascript_injector","setting":"proj-context_aer","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_all","value":"[false,false]"},{"module":"redcap_javascript_injector","setting":"proj-context_data_entry","value":"[\"include\",\"include\"]"},{"module":"redcap_javascript_injector","setting":"proj-context_db","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_dbp","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_php","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_psp","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_report","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_rhp","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_rsd","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-context_survey","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-custom-inject","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-custom-reject","value":"[null,null]"},{"module":"redcap_javascript_injector","setting":"proj-debug","value":"[false,false]"},{"module":"redcap_javascript_injector","setting":"proj-enabled","value":"[true,true]"},{"module":"redcap_javascript_injector","setting":"proj-instruments","value":"[[\"nemail\"],[\"babyenrol\",\"site_phase_dates_addtl_info\"]]"},{"module":"redcap_javascript_injector","setting":"proj-jsmo","value":"[false,false]"},{"module":"redcap_javascript_injector","setting":"proj-name","value":"[\"If no emails defined on site's \\\"Notification Email Addresses\\\" form, disable site in check list of sites to email on \\\"Site Notification Email\\\" form.\",\"Set value of curr_view_is_app to 0\"]"},{"module":"redcap_javascript_injector","setting":"proj-order","value":"[\"file-first\",\"text-first\"]"},{"module":"redcap_javascript_injector","setting":"proj-snippet","value":"[\"true\",\"true\"]"},{"module":"redcap_ui_tweaker","setting":"fix-form-navigation","value":"false"},{"module":"redcap_ui_tweaker","setting":"hide-unverified-option","value":"false"},{"module":"redcap_ui_tweaker","setting":"prevent-lock-as-change","value":"true"},{"module":"redcap_ui_tweaker","setting":"report-namespace","value":"[\"true\",\"true\",\"true\"]"},{"module":"redcap_ui_tweaker","setting":"report-namespace-name","value":"[\"Data Management\",\"Trial Management\",\"NEWS-HEAT\"]"},{"module":"redcap_ui_tweaker","setting":"report-namespace-roles","value":"[\"Data Management\\nData Management +\",\"Trial Management\",\"NEWS-HEAT Data Management\\nNEWS-HEAT Project Management\"]"},{"module":"redcap_ui_tweaker","setting":"report-namespaces","value":"true"},{"module":"redcap_ui_tweaker","setting":"require-change-reason-complete","value":"true"},{"module":"validation_tweaker","setting":"baseline-date","value":"babyenrol_dob"},{"module":"validation_tweaker","setting":"enforce-validation","value":"false"},{"module":"validation_tweaker","setting":"enforce-validation-exempt","value":"[\"true\"]"},{"module":"validation_tweaker","setting":"enforce-validation-exempt-form","value":"[null]"},{"module":"validation_tweaker","setting":"enforce-validation-exempt-forms","value":"false"},{"module":"validation_tweaker","setting":"enforce-validation-exempt-mode","value":"[null]"},{"module":"validation_tweaker","setting":"no-future-dates","value":"false"},{"module":"validation_tweaker","setting":"no-past-dates","value":"false"},{"module":"validation_tweaker","setting":"survey-skip-validate","value":"false"},{"module":"validation_tweaker","setting":"survey-skip-validate-exempt-form","value":"[null]"},{"module":"validation_tweaker","setting":"survey-skip-validate-exempt-forms","value":"false"}]}